export class UIManager { constructor(game) { this.game = game; } updateDisplay() { document.getElementById('pot-display').textContent = this.game.pot; document.getElementById('main-pot').textContent = this.game.pot; document.getElementById('blind-level').textContent = `${this.game.smallBlind}/${this.game.bigBlind}`; this.renderPlayers(); this.renderCommunityCards(); } renderPlayers() { const container = document.getElementById('players-container'); container.innerHTML = ''; this.game.players.forEach((player, index) => { const seat = document.createElement('div'); seat.className = `player-seat seat-${index}`; if (index === this.game.currentPlayer && !player.folded) { seat.classList.add('active-turn'); } if (player.folded) { seat.classList.add('folded'); } seat.innerHTML = `<div><strong>${player.name}</strong></div><div>Chips: ${player.stack}</div><div>Bet: ${player.bet}</div><div class="player-cards">${player.hand.map((card, i) => this.renderCard(card, index === 0 ? i === 0 : false)).join('')}</div>`; container.appendChild(seat); }); } renderCard(card, show = false) { if (!card) return '<div class="card card-back"></div>'; const isRed = ['h', 'd'].includes(card.suit); const suitSymbol = { 'h': '♥', 'd': '♦', 'c': '♣', 's': '♠' }[card.suit]; return `<div class="card ${isRed ? 'red' : 'black'}">${card.rank}${suitSymbol}</div>`; } renderCommunityCards() { const container = document.getElementById('community-cards'); container.innerHTML = this.game.communityCards.map(card => this.renderCard(card)).join(''); } updateControls() { const controls = document.getElementById('controls-area'); const humanPlayer = this.game.players[0]; const canCheck = this.game.currentBet === humanPlayer.bet; const canCall = this.game.currentBet > humanPlayer.bet; document.getElementById('btn-check').disabled = !canCheck; document.getElementById('btn-check').style.display = canCheck ? 'block' : 'none'; document.getElementById('btn-call').disabled = !canCall; document.getElementById('btn-call').style.display = canCall ? 'block' : 'none'; document.getElementById('btn-call').textContent = `Call (${this.game.currentBet - humanPlayer.bet})`; const maxRaise = Math.min(humanPlayer.stack, 1000); document.getElementById('raise-slider').max = maxRaise; controls.classList.remove('hidden'); } showGameOver() { const overlay = document.getElementById('overlay'); const winner = this.game.players.find(p => !p.folded); document.getElementById('modal-title').textContent = winner.id === 0 ? 'You Won!' : `${winner.name} Won!`; document.getElementById('modal-msg').textContent = `${winner.name} won $${this.game.pot}!`; overlay.classList.remove('hidden'); } }
